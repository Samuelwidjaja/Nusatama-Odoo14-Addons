<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="mrp_timesheet_tree_view" model="ir.ui.view">
        <field name="name">mrp.timesheet.tree.view</field>
        <field name="model">account.analytic.line</field>
        <field name="arch" type="xml">
            <tree editable="bottom" string="Timesheet Activities" default_order="date">
                <field name="date"/>
                <field name="user_id" invisible="1"/>
                <field name="employee_id" required="1" widget="many2one_avatar_employee" context="{'active_test': True}"/>
                <field name="mrp_production_id" options="{'no_create':True}"/>
                <field name="mrp_workorder_id" options="{'no_create':True}"/>
                <field name="name" required="0"/>
                <field name="unit_amount" string="Duration" widget="timesheet_uom" decoration-danger="unit_amount &gt; 24"/>
                <field name="company_id" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <record id="mrp_timesheet_action_window" model="ir.actions.act_window">
        <field name="name">Timesheet Activities</field>
        <field name="res_model">account.analytic.line</field>
        <field name="view_mode">tree</field>
        <field name="view_ids" eval="[
                (5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('aos_mrp_timesheet.mrp_timesheet_tree_view'), 'sequence':1}),
        ]"/>
    </record>

    <menuitem
        id="mrp_timesheet_root_menu"
        name="Timesheet"
        groups="hr.group_hr_user"
        parent="mrp.menu_mrp_root"
        sequence="40"/>

    <menuitem
        id="mrp_timesheet_administrator_menu"
        name="All Timesheet"
        action="mrp_timesheet_action_window"
        groups="hr.group_hr_manager"
        parent="mrp_timesheet_root_menu"
        sequence="1"/>

    <menuitem
        id="mrp_timesheet_user_menu"
        name="My Timesheet"
        action="mrp_timesheet_action_window"
        groups="hr.group_hr_user"
        parent="mrp_timesheet_root_menu"
        sequence="2"/>
</odoo>
